function Controller(){function e(e){var t,l=[],o=[],r="";t=JSON.parse(null!=e?e:r);var s=a.createStyle({classes:["result_item"]}),_=a.createStyle({classes:["horizontal_results_nav_view"]}),d=a.createStyle({classes:["result_title"]});if("favourites"!=c)for(var v=0;t.length>v;v++)if(Ti.API.info("Cocktail "+v+" Title: "+t[v].Cocktail.title),n)for(var I=0;t[v].Cocktail.drinks.length>I;I++)c==t[v].Cocktail.drinks[I].Drink.id&&(Ti.API.info("match is true for cocktail: "+t[v].Cocktail.title),l.push(t[v].Cocktail));else for(var I=0;t[v].Cocktail.subcategories.length>I;I++)c==t[v].Cocktail.subcategories[I].Subcategory.id&&(Ti.API.info("match is true for cocktail: "+t[v].Cocktail.title),l.push(t[v].Cocktail));else{var u=Titanium.App.Properties.getList("favs",new Array);if(0==u.length);else{Ti.API.info(u.length+" favourites found");for(var v=0;u.length>v;v++)for(var I=0;t.length>I;I++)t[I].Cocktail.id==u[v].id&&(Ti.API.info("Fav cocktail: "+t[I].title),l.push(t[I].Cocktail))}}if(l.length>0)for(var y=a.createStyle({classes:["cocktail_image_glass"]}),p=a.createStyle({classes:["white_banner"]}),v=0;l.length>v;v+=2){var w=Ti.UI.createView();for(w.applyProperties(_),a.drink_results.add(w),I=v;v+2>I&&l.length>I;I++){var k=Ti.UI.createView();k.applyProperties(s);var g=Alloy.Globals.Utils.RemoteImage({image:l[I].image_thumb,defaultImage:"images/cocktails/glass.png"});g.applyProperties(y),k.add(g);var f=Ti.UI.createView();f.height=Ti.UI.SIZE,f.width=Ti.UI.FILL,f.bottom="0dp",f.touchEnabled=!1,k.add(f);var h=Ti.UI.createView();h.applyProperties(p),f.add(h);var T=Ti.UI.createLabel({text:l[I].title.toUpperCase()});if(T.applyProperties(d),f.add(T),k.cocktailData=l[I],k.addEventListener("click",i),"favourites"==c){var m=a.createStyle({classes:["fav_heart_style"]});k.ID=l[I].id;var A=Ti.UI.createImageView();A.image="/images/favs/heart_broken.png",A.applyProperties(m),k.broken_heart_image=A,k.add(A)}o.push(k),w.add(k)}}else{Ti.API.info("No relevant cocktails found");var U=a.createStyle({classes:["no_results"]}),b=a.createStyle({classes:["no_results_title"]}),L=Ti.UI.createView();if(L.applyProperties(U),"favourites"!=c)var T=Ti.UI.createLabel({text:"Sorry, no results were found. \nPlease try another category."});else var T=Ti.UI.createLabel({text:"You haven't saved any favourites yet. \n\nSave your favourites by clicking on the heart icon in each recipe. \n\nDon't forget favourite recipes can be viewed even when you're not connected to the internet."});T.applyProperties(b),L.add(T),a.drink_results.add(L)}a.cocktail_results.addEventListener("focus",function(){if("favourites"==c)for(var e=Titanium.App.Properties.getList("favs",new Array),i=0;o.length>i;i++)if(0==e.length){var t=Titanium.UI.createAnimation();t.opacity=.5,t.duration=300,t.curve=Ti.UI.ANIMATION_CURVE_EASE_OUT,o[i].broken_heart_image.animate(t)}else{for(var l=!1,a=0;e.length>a;a++)if(o[i].ID==e[a].id){var t=Titanium.UI.createAnimation();t.opacity=0,t.duration=300,t.curve=Ti.UI.ANIMATION_CURVE_EASE_IN,o[i].broken_heart_image.animate(t),l=!0}if(!l){var t=Titanium.UI.createAnimation();t.opacity=.5,t.duration=300,t.curve=Ti.UI.ANIMATION_CURVE_EASE_OUT,o[i].broken_heart_image.animate(t)}}})}function i(e){var i=Alloy.createController("cocktail_detailed",e.source.cocktailData).getView();i.open()}function t(){var e=Alloy.Globals.windowStack.indexOf(a.cocktail_results);Alloy.Globals.windowStack.splice(e,1),a.cocktail_results.close()}function l(e){Alloy.Globals.goToHome(e)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="cocktail_results",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var a=this,o={},r={};a.__views.cocktail_results=Ti.UI.createWindow({backgroundColor:"white",titleAttributes:{color:Alloy.Globals.PrimaryColor,font:{fontFamily:Alloy.Globals.MainFont,fontSize:"18dp"}},barColor:"#fff",layout:"vertical",height:"568dp",width:"320dp",navBarHidden:!0,orientationModes:[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT],tintColor:Alloy.Globals.PrimaryColor,navTintColor:Alloy.Globals.PrimaryColor,title:"COCKTAILS",id:"cocktail_results"}),a.__views.cocktail_results&&a.addTopLevelView(a.__views.cocktail_results),a.__views.__alloyId121=Ti.UI.createView({height:"50dp",width:Ti.UI.FILL,id:"__alloyId121"}),a.__views.cocktail_results.add(a.__views.__alloyId121),a.__views.__alloyId122=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"#fff",opacity:"1",id:"__alloyId122"}),a.__views.__alloyId121.add(a.__views.__alloyId122),a.__views.__alloyId123=Ti.UI.createView({width:Ti.UI.FILL,id:"__alloyId123"}),a.__views.__alloyId121.add(a.__views.__alloyId123),a.__views.__alloyId124=Ti.UI.createView({backgroundImage:"/images/icons/back.png",left:"10dp",top:"10dp",bottom:"10dp",height:"30dp",width:"30dp",id:"__alloyId124"}),a.__views.__alloyId123.add(a.__views.__alloyId124),t?a.__views.__alloyId124.addEventListener("click",t):r["$.__views.__alloyId124!click!closeWindow"]=!0,a.__views.cocktail_results_page_title=Ti.UI.createLabel({color:"#313646",font:{fontFamily:Alloy.Globals.MainFont,fontSize:"20dp"},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,left:"50dp",right:"50dp",text:"COCKTAILS",id:"cocktail_results_page_title"}),a.__views.__alloyId123.add(a.__views.cocktail_results_page_title),a.__views.__alloyId125=Ti.UI.createView({backgroundImage:"/images/icons/home.png",right:"10dp",top:"10dp",bottom:"10dp",height:"30dp",width:"30dp",id:"__alloyId125"}),a.__views.__alloyId123.add(a.__views.__alloyId125),l?a.__views.__alloyId125.addEventListener("click",l):r["$.__views.__alloyId125!click!goToHome"]=!0,a.__views.__alloyId126=Ti.UI.createView({height:"1dp",width:Ti.UI.FILL,backgroundImage:"/images/common/color_sep.png",id:"__alloyId126"}),a.__views.cocktail_results.add(a.__views.__alloyId126),a.__views.__alloyId127=Ti.UI.createScrollView({top:"0dp",layout:"vertical",bottom:"0dp",width:Ti.UI.FILL,height:Ti.UI.FILL,contentWidth:"auto",contentHeight:Ti.UI.SIZE,disableBounce:!0,showVerticalScrollIndicator:!0,showHorizontalScrollIndicator:!1,backgroundColor:"#efefef",id:"__alloyId127"}),a.__views.cocktail_results.add(a.__views.__alloyId127),a.__views.drink_results=Ti.UI.createView({id:"drink_results",layout:"vertical",height:Ti.UI.SIZE,width:Ti.UI.FILL,bottom:"10dp"}),a.__views.__alloyId127.add(a.__views.drink_results),o.destroy=function(){},_.extend(a,a.__views);var s=arguments[0]||{},c=s.id||"Category not received",n=!0;"favourites"!=c?(a.cocktail_results.title=s.title.toUpperCase(),n=s.topCategory):"favourites"==c&&(a.cocktail_results.title="FAVOURITES"),Alloy.Globals.Utils.GetAppData("/client/idl/perfect-mix/cocktails/cocktails/viewjson","data/Cocktails.txt",e),a.cocktail_results.addEventListener("close",function(){}),a.cocktail_results.addEventListener("open",function(){Alloy.Globals.windowStack.push(a.cocktail_results)}),a.cocktail_results.addEventListener("androidback",function(){a.cocktail_results.close({activityEnterAnimation:Ti.App.Android.R.anim.slide_in_left,activityExitAnimation:Ti.App.Android.R.anim.slide_out_right});var e=Alloy.Globals.windowStack.indexOf(a.cocktail_results);Alloy.Globals.windowStack.splice(e,1)}),r["$.__views.__alloyId119!click!closeWindow"]&&a.__views.__alloyId119.addEventListener("click",t),r["$.__views.__alloyId120!click!goToHome"]&&a.__views.__alloyId120.addEventListener("click",l),r["$.__views.__alloyId124!click!closeWindow"]&&a.__views.__alloyId124.addEventListener("click",t),r["$.__views.__alloyId125!click!goToHome"]&&a.__views.__alloyId125.addEventListener("click",l),r["$.__views.__alloyId129!click!goToHome"]&&a.__views.__alloyId129.addEventListener("click",l),r["$.__views.__alloyId131!click!closeWindow"]&&a.__views.__alloyId131.addEventListener("click",t),_.extend(a,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;
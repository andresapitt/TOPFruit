define(["Ti/_","Ti/API","Ti/_/analytics","Ti/App","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/Buffer","Ti/Platform","Ti/UI","Ti/Locale","Ti/_/include"],function(e,t,n,i,o,r,a,l,s,d,u,c){function p(){}function f(){h||(h=1,i.fireEvent("close"),n.add("ti.end","ti.end"))}var m,h,y,g=window,T=require,v=T.config,b=i.deployType,A=v.ti.version,_=(T.is,T.on),O=[],w=a.setObject("Ti",o,{constants:{buildDate:v.ti.buildDate,buildHash:v.ti.buildHash,version:A},properties:{userAgent:function(){return navigator.userAgent}},createBuffer:function(e){return new d(e)},include:function(e){"array"==typeof e||(e=[].concat(Array.prototype.slice.call(arguments,0))),e.forEach(function(e){require("Ti/_/include!"+e)})},deferStart:function(){if(!m){var e=Math.round(1e12*Math.random());return O.push(e),function(){var t=O.indexOf(e);~t&&O.splice(t,1),m=1,O.length||(r("ti-instrumentation")&&instrumentation.stopTest(instrumentation.systemLoadTimeTest),require(v.main||["app.js"]))}}t.warn("app.js already loaded!")}}),E=w.deferStart();if(r("function-bind")||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,i=n.call(arguments,1),o=function(){var r,a=i.concat(n.call(arguments));return this instanceof o?(r=t.apply(this,a),Object(r)===r?r:this):t.apply(e,a)};return t.prototype&&(p.prototype=t.prototype,o.prototype=new p,p.prototype=null),o}),!r("js-btoa")){var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=String.fromCharCode;g.btoa=function(e){for(var t,n,i,o,r,a,l,s=[],d=0,u=e.length;u>d;)t=e.charCodeAt(d++),n=e.charCodeAt(d++),i=e.charCodeAt(d++),o=t>>2,r=(3&t)<<4|n>>4,a=(15&n)<<2|i>>6,l=63&i,isNaN(n)?a=l=64:isNaN(i)&&(l=64),s.push(N.charAt(o)+N.charAt(r)+N.charAt(a)+N.charAt(l));return s.join("")},g.atob=function(e){var t,n,i,o,r=[],a=0,l=e.length;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l>a;)t=N.indexOf(e.charAt(a++)),n=N.indexOf(e.charAt(a++)),i=N.indexOf(e.charAt(a++)),o=N.indexOf(e.charAt(a++)),r.push(j(t<<2|n>>4)),64!==i&&r.push(j((15&n)<<4|i>>2)),64!==o&&r.push(j((3&i)<<6|o));return r.join("")}}return Object.defineProperty(g,"Ti",{value:w,writable:!1}),Object.defineProperty(g,"Titanium",{value:w,writable:!1}),t.info("Appcelerator Titanium "+A+" Mobile Web"),v.vendorPrefixes||(v.vendorPrefixes=["","Moz","Webkit","O","ms"]),w.parse=JSON.parse,w.stringify=JSON.stringify,_(g,"beforeunload",f),_(g,"unload",f),r("ti-show-errors")&&_(g,"error",function(e){function t(e,t,n,i){s.add(c.createLabel({color:n,font:{fontSize:i,fontWeight:"bold"},height:t,left:10,right:10,textAlign:c.TEXT_ALIGNMENT_CENTER,text:e}))}if(!y){y=1;var n,i,o=e.filename||"",r=o.match(/:\/\/.+(\/.*)/),a=r?r[1]:e.filename,l=e.lineno,s=c.createWindow({backgroundColor:"#f00",top:"100%",height:"100%",layout:c._LAYOUT_CONSTRAINING_VERTICAL});t("Application Error","15%","#0f0","24pt"),t((e.message||"Unknown error").trim()+(a&&"undefined"!==a?" at "+a:"")+(l?" (line "+l+")":""),"45%","#fff","16pt"),s.add(n=c.createView({height:"12%"})),n.add(i=c.createButton({title:"Dismiss"})),s.addEventListener("close",function(){s.destroy()}),i.addEventListener("singletap",function(){s.animate({duration:500,top:"100%"},function(){s.close(),y=0})}),t("Error messages will only be displayed during development. When your app is packaged for final distribution, no error screen will appear. Test your code!","28%","#000","10pt"),_.once(s,"postlayout",function(){setTimeout(function(){s.animate({duration:500,top:0},function(){s.top=0,s.height="100%"})},100)}),s.open()}}),l(function(){s.set(document.body,{margin:0,padding:0}),i.analytics&&(null===localStorage.getItem("ti:enrolled")&&(n.add("ti.enroll","ti.enroll",{app_name:i.name,app_version:i.version,oscpu:1,mac_addr:null,deploytype:b,ostype:u.osname,osarch:null,app_id:i.id,platform:u.name,model:u.model}),localStorage.setItem("ti:enrolled",!0)),n.add("ti.start","ti.start",{tz:(new Date).getTimezoneOffset(),deploytype:b,os:u.osname,osver:u.ostype,version:v.ti.version,platform:u.name,model:u.model,un:null,app_version:i.version,nettype:null}),n.send()),setTimeout(E,1)}),w});
function Controller(){function e(e){var i;i=JSON.parse(null!=e?e:d);for(var l=[],a=0;i.length>a;a++){var _=i[a].Event.finish_date.substring(0,10).split("-"),n=new Date(_[0],_[1]-1,_[2]);new Date>n||l.push(i[a])}l.sort(function(e,t){var i=e.Event.finish_date.substring(0,10).split("-"),l=new Date(i[0],i[1]-1,i[2]),o=t.Event.finish_date.substring(0,10).split("-"),a=new Date(o[0],o[1]-1,o[2]);return a>l?-1:l>a?1:0});for(var s=o.createStyle({classes:["event_item"]}),r=o.createStyle({classes:["event_title"]}),c=o.createStyle({classes:["event_separator"]}),v=o.createStyle({classes:["event_image"]}),w=o.createStyle({classes:["event_arrow"]}),I=o.createStyle({classes:["event_time"]}),a=0;l.length>a;a++){var p=Ti.UI.createView(),y=Ti.UI.createView({layout:"vertical",height:"67dp",left:"72dp",right:"20dp",touchEnabled:!1});p.add(y);var g=Ti.UI.createLabel({text:l[a].Event.title.toUpperCase()});g.applyProperties(r),y.add(g),p.applyProperties(s);var m=Ti.UI.createLabel({text:l[a].Event.date});m.applyProperties(I),y.add(m);var h=Alloy.Globals.Utils.RemoteImage({image:l[a].Event.thumb_image_url,defaultImage:"/images/placeholders/ph_events.png"});h.applyProperties(v),p.add(h);var u,u=Ti.UI.createImageView({image:"./images/common/chevron.png"});if(u.applyProperties(w),p.add(u),p.eventData=l[a].Event,p.addEventListener("click",t),o.event_item_container.add(p),a!=i.length-1){var T=Ti.UI.createView();T.applyProperties(c),o.event_item_container.add(T)}}}function t(e){var t=Alloy.createController("event_desc",e.source.eventData).getView();t.open()}function i(){var e=Alloy.Globals.windowStack.indexOf(o.events);Alloy.Globals.windowStack.splice(e,1),o.events.close()}function l(e){Alloy.Globals.goToHome(e)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="events",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var o=this,a={},n={};o.__views.events=Ti.UI.createWindow({backgroundColor:"white",titleAttributes:{color:Alloy.Globals.PrimaryColor,font:{fontFamily:Alloy.Globals.MainFont,fontSize:"18dp"}},barColor:"#fff",layout:"vertical",height:"568dp",width:"320dp",navBarHidden:!0,orientationModes:[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT],tintColor:Alloy.Globals.PrimaryColor,navTintColor:Alloy.Globals.PrimaryColor,title:"UPCOMING EVENTS",id:"events"}),o.__views.events&&o.addTopLevelView(o.__views.events),o.__views.__alloyId238=Ti.UI.createView({height:"50dp",width:Ti.UI.FILL,top:"0dp",id:"__alloyId238"}),o.__views.events.add(o.__views.__alloyId238),o.__views.__alloyId239=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"#fff",opacity:"1",id:"__alloyId239"}),o.__views.__alloyId238.add(o.__views.__alloyId239),o.__views.__alloyId240=Ti.UI.createView({width:Ti.UI.FILL,id:"__alloyId240"}),o.__views.__alloyId238.add(o.__views.__alloyId240),o.__views.__alloyId241=Ti.UI.createView({backgroundImage:"/images/icons/back.png",left:"10dp",top:"10dp",bottom:"10dp",height:"30dp",width:"30dp",id:"__alloyId241"}),o.__views.__alloyId240.add(o.__views.__alloyId241),i?o.__views.__alloyId241.addEventListener("click",i):n["$.__views.__alloyId241!click!closeWindow"]=!0,o.__views.__alloyId242=Ti.UI.createLabel({color:"#313646",font:{fontFamily:Alloy.Globals.MainFont,fontSize:"20dp"},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,left:"50dp",right:"50dp",text:"UPCOMING EVENTS",id:"__alloyId242"}),o.__views.__alloyId240.add(o.__views.__alloyId242),o.__views.__alloyId243=Ti.UI.createView({backgroundImage:"/images/icons/home.png",right:"10dp",top:"10dp",bottom:"10dp",height:"30dp",width:"30dp",id:"__alloyId243"}),o.__views.__alloyId240.add(o.__views.__alloyId243),l?o.__views.__alloyId243.addEventListener("click",l):n["$.__views.__alloyId243!click!goToHome"]=!0,o.__views.__alloyId244=Ti.UI.createView({height:"1dp",width:Ti.UI.FILL,backgroundImage:"/images/common/color_sep.png",top:"0dp",id:"__alloyId244"}),o.__views.events.add(o.__views.__alloyId244),o.__views.event_view=Ti.UI.createScrollView({top:"0dp",layout:"vertical",bottom:"0dp",width:Ti.UI.FILL,height:Ti.UI.FILL,contentWidth:"auto",contentHeight:Ti.UI.SIZE,disableBounce:!0,showVerticalScrollIndicator:!0,showHorizontalScrollIndicator:!1,backgroundColor:"#efefef",id:"event_view"}),o.__views.events.add(o.__views.event_view),o.__views.event_item_container=Ti.UI.createView({backgroundColor:"#fff",height:Ti.UI.SIZE,borderRadius:0,borderColor:"#d1d1d1",borderWidth:1,top:"10dp",left:"5dp",right:"5dp",layout:"vertical",bottom:"10dp",id:"event_item_container"}),o.__views.event_view.add(o.__views.event_item_container),a.destroy=function(){},_.extend(o,o.__views),Alloy.Globals.Utils.GetAppData("/client/idl/perfect-mix/events/events/viewjson","data/Events.txt",e);var d="";o.events.addEventListener("close",function(){}),o.events.addEventListener("open",function(){Alloy.Globals.windowStack.push(o.events)}),o.events.addEventListener("androidback",function(){o.events.close({activityEnterAnimation:Ti.App.Android.R.anim.slide_in_left,activityExitAnimation:Ti.App.Android.R.anim.slide_out_right});var e=Alloy.Globals.windowStack.indexOf(o.events);Alloy.Globals.windowStack.splice(e,1)}),n["$.__views.__alloyId235!click!closeWindow"]&&o.__views.__alloyId235.addEventListener("click",i),n["$.__views.__alloyId237!click!goToHome"]&&o.__views.__alloyId237.addEventListener("click",l),n["$.__views.__alloyId241!click!closeWindow"]&&o.__views.__alloyId241.addEventListener("click",i),n["$.__views.__alloyId243!click!goToHome"]&&o.__views.__alloyId243.addEventListener("click",l),n["$.__views.__alloyId246!click!goToHome"]&&o.__views.__alloyId246.addEventListener("click",l),n["$.__views.__alloyId248!click!closeWindow"]&&o.__views.__alloyId248.addEventListener("click",i),_.extend(o,a)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;